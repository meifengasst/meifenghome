<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¾é³³çš„å®¶ ç§æˆ¿èœï½œç·šä¸Šé è¨‚</title>

    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500&family=Noto+Serif+TC:wght@600;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        /* --- ğŸ¨ åŸºç¤é…è‰²è®Šæ•¸ --- */
        :root { 
            --primary-color: #8E1E20; /* æ·±ç´… */
            --accent-color: #D4AF37;  /* é‡‘è‰² */
            --text-color: #4A4A4A;    /* æ·±ç° */
            --white: #ffffff; 
        }
        
        /* --- ğŸ§§ èƒŒæ™¯è¨­å®š --- */
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            color: var(--text-color);
            margin: 0; 
            padding: 40px 20px; 
            min-height: 100vh;
            background-color: transparent;
            padding-bottom: 100px; 
        }

        /* èƒŒæ™¯åœ–ç‰‡å±¤ */
        .cny-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; 
            background-image: url('image_7.png');
            background-repeat: repeat;
            background-size: 400px auto; 
            filter: none;
        }

        /* é®ç½©å±¤ (é€æ˜) */
        .cny-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; 
            background-color: transparent; 
            pointer-events: none;
        }
        
        /* --- æ¨™é¡Œèˆ‡æŒ‰éˆ• --- */
        header { 
            text-align: center; 
            margin-bottom: 40px; 
            padding-bottom: 20px; 
            border-bottom: 2px solid rgba(255, 215, 0, 0.6); 
        }

        /* ç‡™é‡‘æ¨™é¡Œ */
        h1 { 
            font-family: 'Noto Serif TC', serif;
            font-weight: 900; 
            font-size: 4rem;
            margin-bottom: 20px;
            letter-spacing: 4px; 
            background-image: linear-gradient(to bottom, #FFF8D9 0%, #FFD700 30%, #FFC125 60%, #DAA520 100%);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2), 0 0 25px rgba(255, 223, 0, 0.8), 0 0 50px rgba(255, 215, 0, 0.4);
        }
        
        /* åˆ†é¡æŒ‰éˆ• */
        .category-bar { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .cat-btn { 
            padding: 12px 28px; 
            font-size: 1.2rem; 
            border: 2px solid #FFD700; 
            color: #B8860B; 
            background: rgba(255,255,255,0.9); 
            border-radius: 50px; 
            cursor: pointer; 
            transition: 0.3s; 
            font-weight: 600; 
            font-family: 'Noto Serif TC', serif; 
            letter-spacing: 1px;
        }
        .cat-btn:hover, .cat-btn.active { 
            background: linear-gradient(135deg, #FFD700 0%, #FFC125 100%); 
            color: #8E1E20; 
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.6); 
            transform: translateY(-3px);
            border-color: transparent;
        }

        /* --- ä½ˆå±€èˆ‡å…ƒä»¶ --- */
        .container { 
            max-width: 96%; 
            margin: 0 auto; 
            display: flex; 
            gap: 25px; 
            position: relative; 
            align-items: flex-start; 
        }
        
        /* --- 1. å·¦å´æ¬„ä½ --- */
        .left-column {
            flex: 0.7;
            display: flex;
            flex-direction: column;
            position: sticky;
            top: 20px;
            max-height: 90vh;
            z-index: 80;
            min-width: 250px; 
            overflow-y: auto; 
            padding-right: 5px;
        }

        /* Logo */
        .site-logo-container { text-align: center; margin-bottom: 20px; }
        .site-logo {
            width: 180px; 
            height: auto; border-radius: 50%; border: 4px solid var(--accent-color); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); object-fit: cover; background-color: #fff;
        }

        /* å½±ç‰‡è·‘é¦¬ç‡ˆæŒ‰éˆ• */
        .video-ticker-btn {
            background: linear-gradient(135deg, #b71c1c 0%, #8E1E20 100%);
            border: 2px solid #FFD700;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            position: relative;
            height: 50px;
            display: flex;
            align-items: center;
            transition: transform 0.2s;
            flex-shrink: 0; 
        }
        .video-ticker-btn:hover { transform: scale(1.02); box-shadow: 0 0 15px rgba(255, 215, 0, 0.6); }
        .ticker-icon { background: #FFD700; color: #8E1E20; width: 40px; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; z-index: 2; font-weight: bold; }
        .ticker-wrapper { flex: 1; overflow: hidden; white-space: nowrap; position: relative; mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent); }
        .ticker-text { display: inline-block; padding-left: 100%; animation: scroll-left 12s linear infinite; color: #FFF; font-weight: bold; font-size: 1rem; letter-spacing: 1px; }
        @keyframes scroll-left { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        
        /* å…¬å‘Šæ¬„ */
        .notice-section {
            background: rgba(255, 248, 220, 0.95); 
            padding: 20px; 
            border-radius: 12px; 
            border: 2px solid var(--accent-color);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
            font-size: 0.9rem; 
            line-height: 1.5;
            margin-top: 25px; 
        }
        .notice-section h3 { color: var(--primary-color); border-bottom: 2px dashed #ccc; padding-bottom: 10px; margin-top: 0; text-align: center; font-family: 'Noto Serif TC', serif; font-size: 1.2rem; }
        .notice-item { margin-bottom: 15px; }
        .notice-title { font-weight: bold; color: #333; display: block; margin-bottom: 4px; font-size: 1.05em; }
        .highlight-red { color: #d63031; font-weight: bold; }
        .bank-info { background: #fff; padding: 10px; border-radius: 8px; border: 1px dashed var(--primary-color); font-family: monospace; font-size: 1.1em; color: #333; margin-top: 5px; word-break: break-all; }

        /* --- 2. å•†å“åˆ—è¡¨ --- */
        .product-list { 
            flex: 3; 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 25px; 
            align-content: start; 
        }
        .product-card { 
            background: rgba(255, 255, 255, 0.95); 
            border-radius: 12px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
            overflow: hidden; 
            display: flex; 
            flex-direction: column; 
            transition: transform 0.3s; 
            border: 1px solid rgba(0,0,0,0.02); 
        }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.15); }
        
        .product-img-box { 
            width: 100%; 
            height: 280px; 
            background-color: #eee; 
            overflow: hidden; 
            cursor: zoom-in; 
            position: relative; 
        }
        .product-img-box img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
        .product-card:hover .product-img-box img { transform: scale(1.1); }
        .product-img-box::after { content: "ğŸ”"; position: absolute; bottom: 10px; right: 10px; background: rgba(255,255,255,0.8); padding: 5px; border-radius: 50%; opacity: 0; transition: 0.3s; }
        .product-card:hover .product-img-box::after { opacity: 1; }
        
        .card-content { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-cat { font-size: 0.9em; color: var(--accent-color); font-weight: bold; margin-bottom: 5px; }
        .product-name { font-size: 1.4em; font-family: 'Noto Serif TC', serif; font-weight: 900; margin: 8px 0; color: #2c2c2c; line-height: 1.3; }
        .price { color: var(--primary-color); font-weight: bold; font-size: 1.6em; margin: 15px 0; }
        
        button.add-btn { background: linear-gradient(135deg, #8E1E20 0%, #a02d2f 100%); color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; font-size: 1.1em; box-shadow: 0 4px 6px rgba(142, 30, 32, 0.2); transition: 0.2s; }
        button.add-btn:hover { filter: brightness(1.1); transform: scale(0.98); }
        
        /* --- 3. è³¼ç‰©è»Š --- */
        .cart-section { 
            flex: 0.7; 
            background: rgba(255, 255, 255, 0.95); 
            padding: 25px; 
            border-radius: 12px; 
            border-top: 5px solid var(--primary-color); 
            align-self: flex-start; 
            position: sticky; 
            top: 20px; 
            max-height: 90vh; 
            overflow-y: auto; 
            z-index: 90; 
            box-shadow: 0 5px 20px rgba(0,0,0,0.1); 
            min-width: 250px;
            padding-right: 5px;
        }
        .cart-section h2 { font-family: 'Noto Serif TC', serif; color: #333; border-bottom: 1px dashed #ccc; padding-bottom: 15px; margin-top: 0; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f0f0f0; padding: 15px 0; font-size: 0.95em; }
        .total { font-size: 1.5em; font-weight: bold; margin-top: 20px; text-align: right; color: var(--primary-color); font-family: 'Noto Serif TC', serif; }
        .checkout-btn { width: 100%; background: linear-gradient(135deg, #2D6A4F 0%, #40916C 100%); color: white; border: none; font-size: 1.2em; padding: 15px; margin-top: 20px; border-radius: 8px; cursor: pointer; font-weight: bold; box-shadow: 0 4px 10px rgba(45, 106, 79, 0.3); transition: 0.3s; }
        .checkout-btn:hover { filter: brightness(1.1); transform: translateY(-2px); }

        /* ç¤¾ç¾¤æŒ‰éˆ• */
        .social-area { margin-top: 25px; padding-top: 20px; border-top: 2px dashed #eee; display: flex; flex-direction: column; gap: 10px; }
        .social-btn { display: flex; align-items: center; justify-content: center; text-decoration: none; color: white; padding: 12px; border-radius: 8px; font-weight: bold; font-size: 1.1em; transition: transform 0.2s, filter 0.2s; box-shadow: 0 3px 6px rgba(0,0,0,0.15); width: 100%; box-sizing: border-box; }
        .social-btn:hover { transform: translateY(-2px); filter: brightness(1.1); }
        .btn-fb { background-color: #1877F2; } 
        .btn-line { background-color: #06C755; } 
        .btn-google { background-color: #DB4437; } 
        .social-btn svg { width: 24px; height: 24px; margin-right: 10px; fill: white; }

        /* --- åº—å®¶è³‡è¨Šå€å¡Š --- */
        .shop-info { margin-bottom: 20px; font-size: 0.9rem; color: #555; text-align: center; background: #fafafa; padding: 15px; border-radius: 8px; border: 1px solid #eee; }
        .shop-info h3 { font-size: 1.1rem; color: #333; margin-top: 0; margin-bottom: 15px; font-family: 'Noto Serif TC', serif; border-bottom: 1px dashed #ccc; padding-bottom: 5px; }
        .info-item { margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; text-align: left; }
        .info-item:last-of-type { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .info-item strong { color: var(--primary-color); display: block; margin-bottom: 3px; font-size: 0.95em; }
        .copyright-text { font-size: 0.8rem; color: #999; margin-top: 20px; text-align: center; border-top: 1px solid #eee; padding-top: 10px; }

        .mobile-floating-bar { display: none; position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(0, 0, 0, 0.95); padding: 15px 20px; box-shadow: 0 -5px 15px rgba(0,0,0,0.2); z-index: 9999; justify-content: space-between; align-items: center; box-sizing: border-box; transform: translateY(100%); transition: transform 0.3s ease-out; backdrop-filter: blur(10px); border-top: 1px solid #FFD700; }
        .mobile-floating-bar.show { transform: translateY(0); }
        .float-total { color: #FFD700; font-size: 1.3em; font-weight: bold; font-family: 'Noto Serif TC', serif; }
        .float-btn { background: linear-gradient(135deg, #2D6A4F 0%, #40916C 100%); color: white; border: none; padding: 10px 25px; border-radius: 50px; font-weight: bold; font-size: 1.1em; cursor: pointer; }

        /* --- å½ˆå‡ºè¦–çª— (Modal) --- */
        .modal { display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); justify-content: center; align-items: center; backdrop-filter: blur(5px); animation: fadeIn 0.3s; }
        .modal-content { background: white; padding: 30px; border-radius: 15px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.3); position: relative; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #333; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 1em; box-sizing: border-box; }
        .form-group textarea { height: 80px; resize: none; }
        .required::after { content: "*"; color: red; margin-left: 3px; }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 24px; cursor: pointer; color: #999; }
        .submit-btn { width: 100%; background: var(--primary-color); color: white; border: none; padding: 15px; font-size: 1.2em; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 10px; }
        .submit-btn:hover { background: #a02d2f; }
        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }

        /* --- å°ç£ Pay QR Code æ¨£å¼ --- */
        .qr-code-container {
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            background: #fff8e1; /* æ·¡é»ƒè‰²èƒŒæ™¯å‡¸é¡¯ */
            border: 2px dashed #D4AF37;
            border-radius: 8px;
            display: none; /* é è¨­éš±è— */
        }
        .qr-code-img {
            max-width: 220px;
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 10px;
            background: #fff;
            padding: 5px;
        }
        .qr-hint {
            color: #8E1E20;
            font-weight: bold;
            font-size: 1em;
            margin: 5px 0;
        }

        /* --- ğŸ†• æ–°å¢ï¼šåŒ¯æ¬¾è³‡è¨Šæ–¹å¡Šæ¨£å¼ --- */
        .bank-details-box {
            background: #fffdf5;
            border: 2px dashed #D4AF37;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            display: none; /* é è¨­éš±è— */
        }
        .bank-details-title { font-weight: bold; font-size: 1.1em; margin-bottom: 8px; color: #333; }
        .bank-account-num { color: #d63031; font-weight: bold; font-size: 1.2em; letter-spacing: 1px; }

        /* --- æ‰‹æ©Ÿç‰ˆéŸ¿æ‡‰å¼è¨­å®š --- */
        @media (max-width: 1200px) {
            .product-list { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 1024px) { 
            .container { flex-direction: column; align-items: stretch; } 
            .left-column, .cart-section { position: static; margin-bottom: 20px; max-height: none; }
            .site-logo { width: 150px; margin-bottom: 20px; }
            .mobile-floating-bar { display: flex; } 
            h1 { font-size: 2.5rem; letter-spacing: 2px; }
            .cat-btn { padding: 10px 20px; font-size: 1.1rem; }
            .product-list { grid-template-columns: 1fr; }
            body { padding: 15px; padding-bottom: 100px; }
        }
    </style>
</head>
<body>

    <div class="cny-background"></div>
    <div class="cny-overlay"></div>
    <header>
        <h1>ğŸ¥¢ç¾é³³çš„å®¶ 2026 è¾²æ›†å¹´èœ é è³¼é–‹è·‘ğŸ</h1>
        <div class="category-bar">
            <button class="cat-btn active" onclick="filterCategory('å…¨éƒ¨')">å…¨éƒ¨</button>
            <button class="cat-btn" onclick="filterCategory('6600æ¡Œèœ')">6600æ¡Œèœ</button>
            <button class="cat-btn" onclick="filterCategory('3800æ¡Œèœ')">3800æ¡Œèœ</button>
            <button class="cat-btn" onclick="filterCategory('é£¯é¡')">é£¯é¡</button>
            <button class="cat-btn" onclick="filterCategory('è‚‰é¡')">è‚‰é¡</button>
            <button class="cat-btn" onclick="filterCategory('æ¹¯é¡')">æ¹¯é¡</button>
            <button class="cat-btn" onclick="filterCategory('æµ·é®®é¡')">æµ·é®®é¡</button>
            <button class="cat-btn" onclick="filterCategory('è”¬èœé¡')">è”¬èœé¡</button>
            <button class="cat-btn" onclick="filterCategory('ç”œé»é¡')">ç”œé»é¡</button>
        </div>
    </header>

    <div class="container">
        
        <div class="left-column">
            <div class="site-logo-container">
                <img src="image_14.png" alt="ç¾é³³çš„å®¶ Logo" class="site-logo">
            </div>

            <div class="video-ticker-btn" onclick="playInterviewVideo()">
                <div class="ticker-icon">â–¶</div>
                <div class="ticker-wrapper">
                    <div class="ticker-text">
                        ğŸ“¢ ç‹‚è³€ï¼ã€ç¾é³³çš„å®¶ã€‘æ¦®ç²çŸ¥åç¯€ç›®å°ˆè¨ªï¼é»æ“Šè§€çœ‹ç²¾å½©æ¡è¨ªå½±ç‰‡ ğŸ¥ å …æŒæ‰‹ä½œå¥½å‘³é“ï¼Œçµ¦æ‚¨æœ€æº«æš–çš„å¹´å¤œé£¯...
                    </div>
                </div>
            </div>

            <div class="shop-info">
                <h3>â„¹ï¸ åº—å®¶è³‡è¨Š & å…§ç”¨å…¬å‘Š</h3>
                
                <div class="info-item">
                    <strong>ğŸ“ åœ°å€</strong>
                    è‹—æ —ç¸£ä¸‰ç£é„‰å’Œå¹³è¡—29è™Ÿ
                </div>
                
                <div class="info-item">
                    <strong>ğŸ“ å…§ç”¨é è¨‚å°ˆç·š</strong>
                    <a href="tel:037833931" style="color:#555; text-decoration:none;">037-833931</a>
                </div>

                <div class="info-item">
                    <strong>âš ï¸ å…§ç”¨è¨‚ä½æé†’</strong>
                    <span style="color:#d63031;">ä¸­é¤ 11:00 å¾Œ / æ™šé¤ 17:00 å¾Œ</span><br>
                    æ•ä¸å†æ¥æ–°å®¢äºº<br>
                    <small style="color:#999;">(å‚™æ–™ä¸åŠï¼Œç„¡æ³•æä¾›æœ€å®Œå–„æœå‹™è«‹è¦‹è«’)</small>
                </div>

                <div class="info-item">
                    <strong>ğŸ’° å…§ç”¨æ”¶è²»æ¨™æº–</strong>
                    <small style="color:var(--primary-color); font-weight:bold;">(2026å¹´å…ƒæœˆå¾Œé©ç”¨)</small>
                    <ul style="padding-left:1.2em; margin:5px 0;">
                        <li>èº«é«˜ 90cm ä»¥ä¸‹ï¼š<span style="color:#2D6A4F; font-weight:bold;">å…è²»</span></li>
                        <li>90-130cmï¼šæ¸…æ½”è²» $100/äºº</li>
                        <li>130cm ä»¥ä¸Šï¼š$550/äºº</li>
                    </ul>
                </div>

                <div class="copyright-text">
                    Copyright Â© 2026 ç¾é³³çš„å®¶ ç‰ˆæ¬Šæ‰€æœ‰
                </div>
            </div>

        </div>

        <div class="product-list" id="productList"></div>
        
        <div class="cart-section">
            <h2>ğŸ“‹ æ‚¨çš„é»é¤å–® <span id="cartCount" style="font-size:0.7em; background:var(--primary-color); color:white; padding:2px 8px; border-radius:10px; vertical-align:middle;">0</span></h2>
            <div id="cartItems"><p style="color: #999; text-align: center; padding: 20px;">å®¢å®˜ï¼Œé‚„æ²’é»èœå‘¢ï¼</p></div>
            <div class="total">ç¸½è¨ˆ: $<span id="totalPrice">0</span></div>
            <button class="checkout-btn" onclick="openCheckoutForm()">å‰å¾€çµå¸³å¡«å¯«è³‡æ–™</button>

            <div class="social-area">
                <a href="https://www.facebook.com/MeiFengHOME" target="_blank" class="social-btn btn-fb">
                    <svg viewBox="0 0 24 24"><path d="M14.07,3c-2.8,0-4.7,1.72-4.7,4.82V10.5H6.5v3.62h2.87v9.12h3.74V14.12h2.93l0.46-3.62h-3.39V8.04c0-1,0.28-1.76,1.79-1.76h1.91V3.11C16.51,3.06,15.34,3,14.07,3z"></path></svg>
                    è¿½è¹¤ç¾é³³çš„å®¶ FB
                </a>
                <a href="https://line.me/R/ti/p/%40hig1742y" target="_blank" class="social-btn btn-line">
                    <svg viewBox="0 0 24 24"><path d="M12,2C6.48,2,2,5.88,2,10.66c0,2.69,1.43,5.09,3.77,6.64c0.16,0.11,0.38,0.34,0.28,0.78 c-0.1,0.47-0.37,1.83-0.41,2.2c-0.06,0.56,0.29,0.55,0.61,0.3c0.41-0.32,2.26-1.54,3.08-2.1c0.43-0.29,0.98-0.33,1.38-0.29 c0.41,0.04,0.85,0.06,1.29,0.06c5.52,0,10-3.88,10-8.66C22,5.88,17.52,2,12,2z M17.34,13.61H6.66c-0.34,0-0.62-0.28-0.62-0.62 v-0.01c0-0.34,0.28-0.62,0.62-0.62h10.68c0.34,0,0.62,0.28,0.62,0.62v0.01C17.96,13.33,17.68,13.61,17.34,13.61z M17.34,10.66H6.66 c-0.34,0-0.62-0.28-0.62-0.62v-0.01c0-0.34,0.28-0.62,0.62-0.62h10.68c0.34,0,0.62,0.28,0.62,0.62v0.01 C17.96,10.38,17.68,10.66,17.34,10.66z M17.34,7.71H6.66C6.32,7.71,6.04,7.43,6.04,7.09v-0.01c0-0.34,0.28-0.62,0.62-0.62h10.68 c0.34,0,0.62,0.28,0.62,0.62v0.01C17.96,7.43,17.68,7.71,17.34,7.71z"></path></svg>
                    æ–°å¢ LINE å¥½å‹
                </a>
                <a href="https://www.google.com/search?gs_ssp=eJzj4tVP1zc0zLAsKigqyDMxYLRSNagwNjGzMEk2STJJNDa3SDFOszKoSEsyNEs0NUpJMjAytjROM_Hieb6v7-Xmzc9ntTxdtw0AsZoYFA&q=%E7%BE%8E%E9%B3%B3%E7%9A%84%E5%AE%B6&oq=%E7%BE%8E%E9%B3%B3%E7%9A%84%E5%AE%B6&gs_lcrp=EgZjaHJvbWUqDQgBEC4YrwEYxwEYgAQyCggAEAAY4wIYgAQyDQgBEC4YrwEYxwEYgAQyBwgCEAAYgAQyBwgDEAAYgAQyBwgEEAAYgAQyBwgFEAAYgAQyBwgGEAAYgAQyBwgHEAAYgAQyBwgIEAAYgAQyBggJEAAYHtIBCDI5NTRqMGo3qAIAsAIA&sourceid=chrome&ie=UTF-8" target="_blank" class="social-btn btn-google">
                    <svg viewBox="0 0 24 24"><path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/></svg>
                    Google åœ°åœ–/è©•è«–
                </a>
            </div>

            <div class="notice-section">
                <h3>ğŸ’¡ è²¼å¿ƒæé†’</h3>
                <div class="notice-item"><span class="notice-title">â³ å–è²¨æ™‚é–“</span>ç‚ºä¿æ–°é®®ï¼Œå–è²¨æ—¥æœ€å¿«åªèƒ½é¸ <strong class="highlight-red">3 å¤©å¾Œ</strong>ã€‚</div>
                <div class="notice-item"><span class="notice-title">â„ï¸ åŒ…è£æ–¹å¼</span>å…¨æ¡ç”¨<strong>ã€ŒçœŸç©ºå†·å‡åŒ…è£ã€</strong>ï¼Œå¹«æ‚¨ä¿ç•™æœ€åŸæ±åŸå‘³çš„ä¸€åˆ»ï¼</div>
                <div class="notice-item"><span class="notice-title">ğŸšš é‹è²»å„ªæƒ </span>
                    <ul style="padding-left: 20px; margin: 5px 0;"><li><strong>7-11 å†·å‡åº—åˆ°åº—</strong><br>æ»¿ $2000 å…é‹ (æœªæ»¿ä»¥ä¸Šé…Œæ”¶é‹è²»$100)</li><li><strong>é»‘è²“å®…é…</strong><br>æ»¿ $3000 å…é‹ (æœªæ»¿ä»¥ä¸Šé…Œæ”¶é‹è²»$200)</li></ul>
                    <div style="margin-top:10px; font-size:0.95em; background:#fff0f0; padding:10px; border-radius:8px; border-left:4px solid #d63031; line-height:1.5;"><strong style="color:#d63031;">âš ï¸ ç‰¹åˆ¥æ³¨æ„ï¼š</strong><br>7-11 é–€å¸‚ä»£æ”¶é‡‘é¡<br><strong>ä¸å¾—è¶…é $2000</strong>ï¼<br>è¶…éé‡‘é¡çš„æœ‹å‹æœƒé€šçŸ¥éº»ç…©<strong>è½‰å¸³è‡³ä¸‹æ–¹ç¾é³³å¸³è™Ÿ</strong>ã€‚</div>
                </div>
                <div class="notice-item"><span class="notice-title">ğŸ’° ä»˜æ¬¾æ–¹å¼</span>å¯é¸ã€Œè²¨åˆ°ä»˜æ¬¾ã€ã€ã€ŒåŒ¯æ¬¾ã€æˆ–ã€Œå°ç£Payæƒç¢¼ã€ã€‚</div>
                
                <div class="notice-item">
                    <span class="notice-title">ğŸ”„ è¨‚å–®ä¿®æ”¹èªªæ˜</span>
                    <div style="margin-top:5px; line-height:1.6; background: rgba(255,255,255,0.6); padding:10px; border-radius:8px;">
                        <strong style="color: var(--primary-color);">Qï¼šä¸‹å–®å¾Œå¯ä»¥ä¿®æ”¹è¨‚å–®å…§å®¹å—ï¼Ÿ</strong><br>
                        Aï¼šç‚ºç¢ºä¿åº«å­˜æ•¸é‡æº–ç¢ºåŠå‡ºè²¨æ•ˆç‡ï¼Œè¨‚å–®æˆç«‹å¾Œ<span class="highlight-red">ç„¡æ³•ç›´æ¥ä¿®æ”¹</span>å…§å®¹ã€‚
                        <ul style="padding-left: 20px; margin: 8px 0; color: #333;">
                            <li style="margin-bottom:5px;"><strong>è‹¥å°šæœªå‡ºè²¨ï¼š</strong> è«‹ç›´æ¥è¯çµ¡å®¢æœå–æ¶ˆè©²ç­†è¨‚å–®ï¼Œä¸¦é‡æ–°ä¸‹å–®è³¼è²·æ‚¨éœ€è¦çš„å•†å“ã€‚</li>
                            <li style="margin-bottom:5px;"><strong>è‹¥å·²å‡ºè²¨ï¼š</strong> éœ€å¾…æ”¶åˆ°å•†å“å¾Œï¼Œä¾ç…§é€€æ›è²¨æµç¨‹è¾¦ç†ã€‚</li>
                            <li><strong>è‹¥åƒ…éœ€ä¿®æ”¹æ”¶ä»¶è³‡è¨Šï¼š</strong> è«‹ç›¡é€Ÿè¯ç¹«å®˜æ–¹ LINE/å®¢æœä¿¡ç®±ï¼Œè‹¥åŒ…è£¹å°šæœªå¯„å‡ºæˆ‘å€‘å°‡ç›¡åŠ›å”åŠ©è®Šæ›´ã€‚</li>
                        </ul>
                    </div>
                </div>

                <div class="notice-item"><span class="notice-title">ğŸ¦ åŒ¯æ¬¾å¸³æˆ¶è³‡è¨Š</span><div class="bank-info"><strong>ç¾é³³çš„å®¶</strong><br>åˆä½œé‡‘åº« (006)<br>å¸³è™Ÿï¼š<span style="color:#8E1E20; font-weight:bold;">0180717681001</span><br>çµ±ç·¨ï¼š72466723</div></div>
            </div>
        </div>
    </div>

    <div class="mobile-floating-bar" id="floatBar">
        <div class="float-total">ç¸½è¨ˆ: $<span id="floatTotal">0</span></div>
        <button class="float-btn" onclick="openCheckoutForm()">å»çµå¸³ â”</button>
    </div>

    <div id="imageModal" class="modal" onclick="closeImageModal()">
        <img style="max-width:90%; max-height:90%; border-radius:5px;" id="modalImg">
    </div>

    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeCheckoutForm()">&times;</span>
            <h2 style="text-align:center; color:var(--primary-color); margin-top:0;">ğŸ“¦ è¨‚è³¼è³‡æ–™</h2>
            
            <div class="form-group">
                <label class="required">å§“å</label>
                <input type="text" id="custName" placeholder="è«‹å•æ€éº¼ç¨±å‘¼æ‚¨ï¼Ÿ">
            </div>
            
            <div class="form-group">
                <label class="required">æ‰‹æ©Ÿè™Ÿç¢¼  </label>
                <input type="tel" id="custMobile" placeholder="09xx-xxx-xxx">
            </div>

            <div class="form-group">
                <label>å¸‚å…§é›»è©± (é¸å¡«)</label>
                <input type="tel" id="custPhone" placeholder="02-xxxx-xxxx">
            </div>

            <div class="form-group">
                <label class="required">æ”¶è²¨æ–¹å¼</label>
                <select id="custDelivery" onchange="updateAddressInput()">
                    <option value="é»‘è²“å®…é…">ğŸš› é»‘è²“å®…é…</option>
                    <option value="7-11å†·å‡åº—åˆ°åº—">ğŸª 7-11 å†·å‡åº—åˆ°åº—</option>
                    <option value="åˆ°åº—è‡ªå–">ğŸ  åˆ°åº—è‡ªå–</option>
                </select>
            </div>

            <div class="form-group" id="addressContainer">
                <label id="addressLabel" class="required">æ”¶è²¨åœ°å€ (å®…é…è«‹å‹™å¿…å¡«å¯«)</label>
                <input type="text" id="custAddress" placeholder="è«‹å¡«å¯«å®Œæ•´çš„æ”¶ä»¶åœ°å€">
            </div>

            <div class="form-group">
                <label class="required">ä»˜æ¬¾æ–¹å¼</label>
                <select id="custPayment" onchange="updatePaymentInput()">
                    <option value="è²¨åˆ°ä»˜æ¬¾">è²¨åˆ°ä»˜æ¬¾</option>
                    <option value="åŒ¯æ¬¾">åŒ¯æ¬¾ (éœ€å¡«å¾Œäº”ç¢¼)</option>
                    <option value="å°ç£Pay">ğŸ’³ å°ç£Pay (æƒç¢¼æ”¯ä»˜)</option>
                    <option value="é¤å»³æ«ƒæª¯çµå¸³">é¤å»³æ«ƒæª¯çµå¸³</option>
                </select>
            </div>

            <div id="bankTransferDetails" class="bank-details-box">
                <div class="bank-details-title">ğŸ¦ åŒ¯æ¬¾å¸³æˆ¶è³‡è¨Š</div>
                <div style="background:#fff; padding:10px; border-radius:5px; border:1px solid #eee;">
                    <strong>ç¾é³³çš„å®¶</strong><br>
                    åˆä½œé‡‘åº« (006)<br>
                    å¸³è™Ÿï¼š<span class="bank-account-num">0180717681001</span><br>
                    çµ±ç·¨ï¼š72466723
                </div>
            </div>

            <div id="taiwanPayContainer" class="qr-code-container">
                <p class="qr-hint">ğŸ“± è«‹æƒæä¸‹æ–¹ QR Code ä»˜æ¬¾</p>
                <img src="image_d2c236.png" class="qr-code-img" alt="å°ç£Payæ”¶æ¬¾ç¢¼">
                <p style="font-size: 0.9em; color: #555; margin-bottom: 0;">
                    æ‡‰ä»˜é‡‘é¡ï¼š<span style="color:red; font-weight:bold; font-size:1.4em;">$<span id="qrPayAmount">0</span></span>
                </p>
                <p style="font-size:0.8em; color:#999; margin-top:5px;">ä»˜æ¬¾æˆåŠŸå¾Œè«‹å¡«å¯«ä¸‹æ–¹æœ«äº”ç¢¼</p>
            </div>

            <div class="form-group" id="bankInfoContainer" style="display:none;">
                <label class="required" id="bankInfoLabel">åŒ¯æ¬¾å¸³è™Ÿå¾Œäº”ç¢¼</label>
                <input type="text" id="custLast5Digits" placeholder="è«‹è¼¸å…¥æ‚¨çš„å¸³è™Ÿå¾Œäº”ç¢¼">
            </div>

            <div class="form-group">
                <label class="required">å¸Œæœ›åˆ°è²¨/è‡ªå–æ—¥æœŸ</label>
                <input type="date" id="custDate">
            </div>

            <div class="form-group">
                <label>å‚™è¨»äº‹é …</label>
                <textarea id="custNote" placeholder="ä¾‹å¦‚ï¼šç®¡ç†å®¤ä»£æ”¶ã€é¿é–‹ä¸­åˆæ™‚æ®µ..."></textarea>
            </div>

            <button class="submit-btn" onclick="submitOrder()">é€å‡ºè¨‚å–®</button>
        </div>
    </div>

    <script>
        // Google Script ç¶²å€
        const googleScriptUrl = "https://script.google.com/macros/s/AKfycbxcMFX4Jh4znkBscP85vPW5-Q_Pq2FqPfMMON4jfCUYQZmUDPuuthLokv4q65RqVwO42A/exec";
        
        const CART_STORAGE_KEY = 'meifeng_cart_v2026';

        // å•†å“è³‡æ–™
        const products = [
            { id: 37, name: "å¯Œè²´å‰ç¥¥ 6600 æ¡Œèœçµ„ (ç´„10äººä»½)", price: 6600, category: "6600æ¡Œèœ", image: "6600.jpg" },
            { id: 38, name: "å¹¸ç¦åœ˜åœ“ 3800 æ¡Œèœçµ„ (ç´„6äººä»½)", price: 3800, category: "3800æ¡Œèœ", image: "3800.jpg" },
            
            { id: 1, name: "æ«»èŠ±è¦ç±³ç³•", price: 450, category: "é£¯é¡", image: "rice.jpg" },
            { id: 2, name: "å®¢å®¶è±¬è…³", price: 780, category: "è‚‰é¡", image: "pork.jpg" },
            { id: 3, name: "è™çš®è¹„è†€", price: 750, category: "è‚‰é¡", image: "meat2.jpg" },
            { id: 4, name: "è™çš®åœ“è¹„", price: 650, category: "è‚‰é¡", image: "meat1.jpg" },
            { id: 5, name: "æ¢…å¹²æ‰£è‚‰", price: 500, category: "è‚‰é¡", image: "meat3.jpg" },
            { id: 6, name: "å®¢å®¶å°å°è‚‰", price: 500, category: "è‚‰é¡", image: "meat4.jpg" },
            { id: 7, name: "åŸå‘³é¦™è…¸", price: 270, category: "è‚‰é¡", image: "meat6.jpg" },
            { id: 8, name: "è’œå‘³é¦™è…¸", price: 270, category: "è‚‰é¡", image: "meat7.jpg" },
            { id: 9, name: "é­šåµé¦™è…¸", price: 300, category: "è‚‰é¡", image: "meat5.jpg" },
            { id: 10, name: "è…¸åœˆ", price: 300, category: "è‚‰é¡", image: "meat8.jpg" },
            { id: 11, name: "è’œè‹—é¹¹è±¬è‚‰", price: 380, category: "è‚‰é¡", image: "" },
            { id: 12, name: "èœœè£½é†¬é´¨ (å…¨)", price: 900, category: "è‚‰é¡", image: "duck1.jpg" },
            { id: 13, name: "èœœè£½é†¬é´¨ (åŠ)", price: 500, category: "è‚‰é¡", image: "duck.jpg" },
            { id: 14, name: "æ”¾é¤Šæ–‡æ˜Œé¹¹æ°´æ¯é› (å…¨)", price: 1200, category: "è‚‰é¡", image: "chk2.jpg" },
            { id: 15, name: "æ”¾é¤Šæ–‡æ˜Œé¹¹æ°´æ¯é› (åŠ)", price: 600, category: "è‚‰é¡", image: "chk.jpg" },
            { id: 16, name: "æ”¾é¤Šå…¬é› (å…¨)", price: 1200, category: "è‚‰é¡", image: "chk1.jpg" },
            { id: 17, name: "å››ç¥è±¬è‚šæ¹¯", price: 680, category: "æ¹¯é¡", image: "soup1.jpg" },
            { id: 18, name: "å®¢å®¶é…¸èœæ’éª¨é´¨æ¹¯", price: 580, category: "æ¹¯é¡", image: "soup4.jpg" },
            { id: 19, name: "é¦™æ¿ƒè€èœè„¯æ’éª¨é›æ¹¯", price: 580, category: "æ¹¯é¡", image: "soup5.jpg" },
            { id: 20, name: "å¾¡å“ä½›è·³ç‰†", price: 900, category: "æ¹¯é¡", image: "soup2.jpg" },
            { id: 21, name: "å¤©éº»äººè”˜çƒéª¨é›æ¹¯", price: 900, category: "æ¹¯é¡", image: "soup3.jpg" },
            { id: 22, name: "æ¸…è’¸æµ·é±¸é­š", price: 500, category: "æµ·é®®é¡", image: "fish1.jpg" },
            { id: 23, name: "æ¸…è’¸æµ·çŸ³æ–‘", price: 680, category: "æµ·é®®é¡", image: "fish2.jpg" },
            { id: 24, name: "è—¥è†³é†‰å¤§è¦", price: 480, category: "æµ·é®®é¡", image: "shrimp.jpg" },
            { id: 25, name: "äº”å‘³é†¬é®‘é­š", price: 580, category: "è”¬èœé¡", image: "fish3.jpg" },
            { id: 26, name: "é³³æ¢¨è¦çƒ", price: 380, category: "è”¬èœé¡", image: "" },
            { id: 27, name: "æœˆäº®è¦é¤…", price: 300, category: "è”¬èœé¡", image: "shrimp2.jpg" },
            { id: 28, name: "å®¢å®¶å°ç‚’", price: 380, category: "è”¬èœé¡", image: "veg1.jpg" },
            { id: 29, name: "è›‹é…¥ç™½èœæ»·", price: 380, category: "è”¬èœé¡", image: "veg3.jpg" },
            { id: 30, name: "é›æ²¹ç‡œç­", price: 280, category: "è”¬èœé¡", image: "veg2.jpg" },
            { id: 31, name: "å¹²è²çµ²é•·å¹´èœ", price: 280, category: "è”¬èœé¡", image: "veg4.jpg" },          
            { id: 32, name: "è˜¿è””ç³•(åªèƒ½å†·è—å¯„é€)", price: 100, category: "ç”œé»é¡", image: "cake.jpg" },
            { id: 33, name: "èŠéº»æ¹¯åœ“(åªèƒ½å†·å‡å¯„é€)", price: 150, category: "ç”œé»é¡", image: "sweet1.jpg" },
            { id: 34, name: "èŠ±ç”Ÿæ¹¯åœ“(åªèƒ½å†·å‡å¯„é€)", price: 150, category: "ç”œé»é¡", image: "sweet1.jpg" },
            { id: 35, name: "åœ°ç“œåœ“", price: 150, category: "ç”œé»é¡", image: "sweet3.jpg" },
            { id: 36, name: "é»‘ç³–ç³•", price: 70, category: "ç”œé»é¡", image: "sweet2.jpg" }
        ];

        let cart = [];

        window.onload = function() {
            const dateInput = document.getElementById('custDate');
            const minDate = new Date();
            minDate.setDate(minDate.getDate() + 3); 
            
            const yyyy = minDate.getFullYear();
            const mm = String(minDate.getMonth() + 1).padStart(2, '0');
            const dd = String(minDate.getDate()).padStart(2, '0');
            const minDateString = `${yyyy}-${mm}-${dd}`;
            
            dateInput.min = minDateString;
            dateInput.value = minDateString; 

            const savedCart = localStorage.getItem(CART_STORAGE_KEY);
            if (savedCart) {
                try {
                    cart = JSON.parse(savedCart);
                    renderCart(); 
                } catch(e) {
                    console.error("è³¼ç‰©è»Šè®€å–å¤±æ•—", e);
                }
            }
            
            renderProducts('å…¨éƒ¨');
            updateAddressInput();
            updatePaymentInput();
        };

        function updateAddressInput() {
            const delivery = document.getElementById('custDelivery').value;
            const addrContainer = document.getElementById('addressContainer');
            const addrLabel = document.getElementById('addressLabel');
            const addrInput = document.getElementById('custAddress');

            addrInput.value = "";

            if (delivery === '7-11å†·å‡åº—åˆ°åº—') {
                addrContainer.style.display = 'block';
                addrLabel.innerText = '7-11 åº—å/åº—è™Ÿ (å¿…å¡«)';
                addrInput.placeholder = 'è«‹è¼¸å…¥ 7-11 é–€å¸‚åç¨±æˆ–åº—è™Ÿ';
            } else if (delivery === 'é»‘è²“å®…é…') {
                addrContainer.style.display = 'block';
                addrLabel.innerText = 'æ”¶è²¨åœ°å€ (å®…é…è«‹å‹™å¿…å¡«å¯«)';
                addrInput.placeholder = 'è«‹å¡«å¯«å®Œæ•´çš„æ”¶ä»¶åœ°å€';
            } else if (delivery === 'åˆ°åº—è‡ªå–') {
                addrContainer.style.display = 'none';
                addrInput.value = 'è¦ªè‡ªå–è²¨'; 
            }
        }

        // ğŸ†• ä¿®æ­£ï¼šè™•ç†å°ç£Payèˆ‡åŒ¯æ¬¾çš„é‚è¼¯
        function updatePaymentInput() {
            const payment = document.getElementById('custPayment').value;
            const bankContainer = document.getElementById('bankInfoContainer');
            const tpContainer = document.getElementById('taiwanPayContainer');
            const bankDetails = document.getElementById('bankTransferDetails'); // å–å¾—åŒ¯æ¬¾è³‡è¨Šæ¡†
            const bankLabel = document.getElementById('bankInfoLabel');
            const last5Input = document.getElementById('custLast5Digits');

            // å…ˆå…¨éƒ¨éš±è—
            bankContainer.style.display = 'none';
            tpContainer.style.display = 'none';
            bankDetails.style.display = 'none'; // éš±è—åŒ¯æ¬¾è³‡è¨Šæ¡†
            
            if (payment === 'åŒ¯æ¬¾') {
                bankContainer.style.display = 'block';
                bankDetails.style.display = 'block'; // é¡¯ç¤ºåŒ¯æ¬¾è³‡è¨Šæ¡†
                bankLabel.innerText = "åŒ¯æ¬¾å¸³è™Ÿå¾Œäº”ç¢¼";
                last5Input.placeholder = "è«‹è¼¸å…¥æ‚¨çš„å¸³è™Ÿå¾Œäº”ç¢¼";
            } 
            else if (payment === 'å°ç£Pay') {
                tpContainer.style.display = 'block'; // é¡¯ç¤º QR Code
                bankContainer.style.display = 'block'; // å°ç£Pay ä¹Ÿè¦å¡«æœ«äº”ç¢¼
                bankLabel.innerText = "å°ç£Pay/è½‰å¸³å¸³è™Ÿ æœ«äº”ç¢¼";
                last5Input.placeholder = "è«‹è¼¸å…¥ä»˜æ¬¾å¸³è™Ÿ/å¡è™Ÿæœ«äº”ç¢¼";
                
                // æ›´æ–° QR Code ä¸‹æ–¹çš„é‡‘é¡
                document.getElementById('qrPayAmount').innerText = document.getElementById('totalPrice').innerText;
            } 
            else {
                last5Input.value = "";
            }
        }

        function playInterviewVideo() {
            const videoID = "vDXSZDidzGA";
            const youtubeThumb = `https://img.youtube.com/vi/${videoID}/maxresdefault.jpg`;

            Swal.fire({
                title: 'ğŸ“º ç¾é³³çš„å®¶ - åª’é«”å°ˆè¨ª',
                html: `
                    <div style="position: relative; cursor: pointer;" onclick="window.open('https://www.youtube.com/watch?v=${videoID}', '_blank')">
                        <img src="${youtubeThumb}" 
                             style="width: 100%; border-radius: 8px; display: block; box-shadow: 0 4px 8px rgba(0,0,0,0.2);" 
                             alt="åª’é«”å°ˆè¨ªæˆªåœ–"
                             onerror="this.src='https://img.youtube.com/vi/${videoID}/hqdefault.jpg'"> <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
                                    background: rgba(0,0,0,0.7); color: white; border-radius: 50%; width: 64px; height: 64px;
                                    display: flex; align-items: center; justify-content: center; font-size: 32px; 
                                    border: 3px solid white; box-shadow: 0 0 15px rgba(0,0,0,0.5); transition: transform 0.2s;">
                            â–¶
                        </div>
                        <div style="position: absolute; bottom: 10px; right: 10px; background: rgba(0,0,0,0.8); color: #fff; padding: 2px 6px; border-radius: 4px; font-size: 12px;">
                            é»æ“Šè§€çœ‹
                        </div>
                    </div>

                    <div style="margin-top: 20px; text-align: left; background: #f9f9f9; padding: 15px; border-radius: 8px; border-left: 4px solid #8E1E20;">
                        <p style="margin: 0; font-size: 1em; color: #333; line-height: 1.6;">
                            æ„Ÿè¬ <strong>å°è¦–æ–°è</strong> å°ˆé¡Œå ±å°ï¼<br>
                            å› é›»è¦–å°ç‰ˆæ¬Šè¨­å®šï¼Œç„¡æ³•ç›´æ¥åœ¨ç¶²é æ’­æ”¾ï¼Œ<br>
                            è«‹é»æ“Šä¸Šæ–¹åœ–ç‰‡å‰å¾€ YouTube è§€çœ‹å®Œæ•´å…§å®¹ ğŸ¬
                        </p>
                        <a href="https://www.youtube.com/watch?v=${videoID}" target="_blank" 
                           style="display: block; margin-top: 10px; text-align: center; color: #fff; background: #c4302b; padding: 10px; border-radius: 50px; text-decoration: none; font-weight: bold;">
                           ğŸ‘‰ å‰å¾€ YouTube è§€çœ‹
                        </a>
                    </div>
                `,
                width: 600, 
                padding: '1.5em',
                background: '#fff',
                showConfirmButton: false, 
                showCloseButton: true,
                backdrop: `rgba(0,0,0,0.8)`
            });
        }

        function saveCart() {
            localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));
        }

        function renderProducts(filterCat) {
            const productListEl = document.getElementById("productList");
            productListEl.innerHTML = ""; 
            const filteredProducts = filterCat === 'å…¨éƒ¨' ? products : products.filter(p => p.category === filterCat);
            
            filteredProducts.forEach(product => {
                const div = document.createElement("div");
                div.className = "product-card";
                div.innerHTML = `
                    <div class="product-img-box" onclick="openImageModal('${product.image}')" title="é»æ“Šæ”¾å¤§">
                        <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/300?text=åœ–ç‰‡æº–å‚™ä¸­'">
                    </div>
                    <div class="card-content">
                        <div><span class="product-cat">${product.category}</span><div class="product-name">${product.name}</div></div>
                        <div><div class="price">$${product.price}</div><button class="add-btn" onclick="addToCart(${product.id})">ï¼‹ åŠ å…¥è¨‚å–®</button></div>
                    </div>
                `;
                productListEl.appendChild(div);
            });
            
            document.querySelectorAll('.cat-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.innerText === filterCat) btn.classList.add('active');
            });
        }

        function openImageModal(src) { document.getElementById("imageModal").style.display = "flex"; document.getElementById("modalImg").src = src; }
        function closeImageModal() { document.getElementById("imageModal").style.display = "none"; }
        
        function openCheckoutForm() {
            if (cart.length === 0) { 
                Swal.fire({ icon: 'warning', title: 'è³¼ç‰©è»Šæ˜¯ç©ºçš„', text: 'å®¢å®˜ï¼Œå…ˆé»å¹¾é“èœå§ï¼', confirmButtonColor: '#8E1E20' });
                return; 
            }
            document.getElementById("checkoutModal").style.display = "flex";
            
            // ğŸ†• ç¢ºä¿æ‰“é–‹è¦–çª—æ™‚ï¼Œæ›´æ–°ä¸€ä¸‹å°ç£Payå€å¡Šçš„é‡‘é¡é¡¯ç¤º
            document.getElementById('qrPayAmount').innerText = document.getElementById('totalPrice').innerText;

            updateAddressInput(); 
            updatePaymentInput();
        }
        function closeCheckoutForm() { document.getElementById("checkoutModal").style.display = "none"; }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            const existingItem = cart.find(item => item.id === id);
            if (existingItem) { existingItem.quantity += 1; } else { cart.push({ ...product, quantity: 1 }); }
            saveCart(); 
            renderCart();
        }

        function renderCart() {
            const cartItemsEl = document.getElementById("cartItems");
            const totalEl = document.getElementById("totalPrice");
            const countEl = document.getElementById("cartCount");
            const floatBar = document.getElementById("floatBar");
            const floatTotal = document.getElementById("floatTotal");

            cartItemsEl.innerHTML = "";
            let total = 0;
            let count = 0;

            if (cart.length === 0) {
                cartItemsEl.innerHTML = "<p style='color: #999; text-align: center; padding: 20px;'>å®¢å®˜ï¼Œé‚„æ²’é»èœå‘¢ï¼</p>";
                if(floatBar) floatBar.classList.remove("show"); 
            } else {
                if(floatBar) floatBar.classList.add("show"); 

                cart.forEach((item, index) => {
                    total += item.price * item.quantity;
                    count += item.quantity;
                    const itemEl = document.createElement("div");
                    itemEl.className = "cart-item";
                    itemEl.innerHTML = `
                        <div><div style="font-weight:bold; color:#333;">${item.name}</div><small style="color:#888">$${item.price} x ${item.quantity}</small></div>
                        <div><span style="font-weight:bold; color:var(--primary-color)">$${item.price * item.quantity}</span><button style="background:#eee; border:none; border-radius:50%; width:24px; height:24px; margin-left:10px; cursor:pointer; color:#888;" onclick="removeFromCart(${index})">Ã—</button></div>
                    `;
                    cartItemsEl.appendChild(itemEl);
                });
            }
            totalEl.innerText = total;
            countEl.innerText = count;
            if(floatTotal) floatTotal.innerText = total;
        }

        function removeFromCart(index) { 
            cart.splice(index, 1); 
            saveCart(); 
            renderCart(); 
        }

        function filterCategory(catName) { renderProducts(catName); }

        function submitOrder() {
            const name = document.getElementById("custName").value;
            const mobile = document.getElementById("custMobile").value;
            const phone = document.getElementById("custPhone").value;
            const address = document.getElementById("custAddress").value;
            const delivery = document.getElementById("custDelivery").value;
            const date = document.getElementById("custDate").value;
            const note = document.getElementById("custNote").value;
            const payment = document.getElementById("custPayment").value;
            const last5 = document.getElementById("custLast5Digits").value;

            // æ¬„ä½æª¢æŸ¥
            if(!name || !mobile || !date) { 
                Swal.fire({ icon: 'warning', title: 'è³‡æ–™ä¸å®Œæ•´', text: 'è«‹å¡«å¯«å§“åã€æ‰‹æ©Ÿå’Œå–è²¨æ—¥æœŸå–”ï¼', confirmButtonColor: '#8E1E20' });
                return; 
            }
            
            if (delivery !== 'åˆ°åº—è‡ªå–' && !address) { 
                Swal.fire({ icon: 'warning', title: 'è³‡æ–™ä¸å®Œæ•´', text: 'è«‹å¡«å¯«æ”¶è²¨åœ°å€æˆ– 7-11 åº—åï¼', confirmButtonColor: '#8E1E20' });
                return; 
            }

            // ğŸ†• æª¢æŸ¥ï¼šå¦‚æœæ˜¯åŒ¯æ¬¾ OR å°ç£Payï¼Œéƒ½éœ€è¦å¡«æœ«äº”ç¢¼
            if ((payment === 'åŒ¯æ¬¾' || payment === 'å°ç£Pay') && !last5) {
                Swal.fire({ icon: 'warning', title: 'è³‡æ–™ä¸å®Œæ•´', text: 'è«‹å¡«å¯«å¸³è™Ÿ/å¡è™Ÿæœ«äº”ç¢¼ï¼Œæ–¹ä¾¿æˆ‘å€‘å°å¸³å–”ï¼', confirmButtonColor: '#8E1E20' });
                return;
            }

            const btn = document.querySelector(".submit-btn");
            const originalText = btn.innerText;
            btn.innerText = "â³ è¨‚å–®å‚³é€ä¸­...";
            btn.disabled = true;

            let orderDetails = "ğŸ›’ è³¼è²·æ¸…å–®ï¼š\n";
            let totalPrice = document.getElementById("totalPrice").innerText;
            cart.forEach(item => {
                orderDetails += `${item.name} x ${item.quantity} = $${item.price * item.quantity}\n`;
            });
            orderDetails += `ğŸ’° ç¸½é‡‘é¡ï¼š$${totalPrice}`;

            const payload = {
                message: orderDetails,
                customer: { name, mobile, phone, address, delivery, payment, last5, date, note, total: totalPrice }
            };

            fetch(googleScriptUrl, {
                method: "POST",
                body: JSON.stringify(payload),
                mode: "no-cors", 
                headers: { "Content-Type": "text/plain" } 
            }).then(() => {
                // ğŸ†• ä¿®æ”¹ï¼šæˆåŠŸé€å‡ºå¾Œçš„è¨Šæ¯
                let successMsg = 'è€é—†æœƒç›¡å¿«è¯çµ¡æ‚¨ï¼';
                if(payment === 'å°ç£Pay') {
                    successMsg = 'è¨‚å–®å·²é€å‡ºï¼Œç¢ºèªæ”¶åˆ°æ¬¾é …å¾Œæœƒç›¡å¿«å®‰æ’å‡ºè²¨ï¼';
                }

                Swal.fire({ icon: 'success', title: 'è¨‚å–®å·²é€å‡º', text: successMsg, confirmButtonColor: '#2D6A4F' });
                
                cart = [];
                localStorage.removeItem(CART_STORAGE_KEY); 
                renderCart();
                closeCheckoutForm();
                btn.innerText = originalText;
                btn.disabled = false;
            }).catch(error => {
                Swal.fire({ icon: 'error', title: 'å‚³é€å¤±æ•—', text: 'è«‹æª¢æŸ¥ç¶²è·¯é€£ç·šæˆ–ç¨å¾Œå†è©¦ã€‚', confirmButtonColor: '#8E1E20' });
                console.error(error);
                btn.innerText = originalText;
                btn.disabled = false;
            });
        }
    </script>
</body>
</html>
